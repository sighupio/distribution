# Copyright (c) 2017-present SIGHUP s.r.l All rights reserved.
# Use of this source code is governed by a BSD-style
# license that can be found in the LICENSE file.

---
apiVersion: kfd.sighup.io/v1alpha2
kind: Immutable
metadata:
  name: valid-k8s-config
spec:
  distributionVersion: v1.32.1

  infrastructure:
    nodes:
      - hostname: cp01.k8s.example.com
        macAddress: 52:54:00:10:00:01
        storage:
          installDisk: /dev/sda
        network:
          ethernets:
            eth0:
              addresses:
                - "192.168.1.10/24"
      - hostname: cp02.k8s.example.com
        macAddress: 52:54:00:10:00:02
        storage:
          installDisk: /dev/sda
        network:
          ethernets:
            eth0:
              addresses:
                - "192.168.1.11/24"
      - hostname: cp03.k8s.example.com
        macAddress: 52:54:00:10:00:03
        storage:
          installDisk: /dev/sda
        network:
          ethernets:
            eth0:
              addresses:
                - "192.168.1.12/24"

    ssh:
      username: core
      keyPath: ~/.ssh/id_rsa

  kubernetes:
    # Valid controlPlane configuration with 3 members
    controlPlane:
      address: k8s-api.example.com:6443
      members:
        - hostname: cp01.k8s.example.com
          ip: 192.168.1.10
        - hostname: cp02.k8s.example.com
          ip: 192.168.1.11
        - hostname: cp03.k8s.example.com
          ip: 192.168.1.12

    etcd:
      members:
        - hostname: cp01.k8s.example.com
          ip: 192.168.1.10
        - hostname: cp02.k8s.example.com
          ip: 192.168.1.11
        - hostname: cp03.k8s.example.com
          ip: 192.168.1.12

    networking:
      podCIDR: 10.244.0.0/16
      serviceCIDR: 10.96.0.0/12

  distribution:
    modules:
      networking:
        type: calico

      ingress:
        baseDomain: example.com
        nginx:
          type: single
          tls:
            provider: none

      logging:
        type: none

      monitoring:
        type: none

      tracing:
        type: none

      policy:
        type: none

      dr:
        type: none

      auth:
        provider:
          type: none
