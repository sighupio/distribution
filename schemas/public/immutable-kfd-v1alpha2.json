{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "A SIGHUP Distribution Kubernetes Cluster deployed on bare metal infrastructure with iPXE boot provisioning and immutable OS configuration.",
  "type": "object",
  "properties": {
    "apiVersion": {
      "type": "string",
      "pattern": "^kfd\\.sighup\\.io/v\\d+((alpha|beta)\\d+)?$"
    },
    "kind": {
      "type": "string",
      "enum": ["Immutable"]
    },
    "metadata": {
      "$ref": "#/$defs/Metadata"
    },
    "spec": {
      "$ref": "#/$defs/Spec"
    },
    "flags": {
      "description": "Persistent furyctl command flags, see the documentation for more details: https://docs.sighup.io/furyctl/flags-configuration"
    }
  },
  "additionalProperties": false,
  "required": ["apiVersion", "kind", "metadata", "spec"],
  "$defs": {
    "Metadata": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the cluster. It will also be used as a prefix for all the other resources created.",
          "minLength": 1,
          "maxLength": 56
        }
      },
      "required": ["name"]
    },
    "Spec": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "distributionVersion": {
          "type": "string",
          "description": "Defines which SD version will be installed and, in consequence, the Kubernetes version used to create the cluster. It supports git tags and branches. Example: `v1.32.1`.",
          "minLength": 1
        },
        "infrastructure": {
          "$ref": "#/$defs/Spec.Infrastructure"
        },
        "kubernetes": {
          "$ref": "#/$defs/Spec.Kubernetes"
        },
        "distribution": {
          "$ref": "#/$defs/Spec.Distribution"
        },
        "plugins": {
          "$ref": "./spec-plugins.json"
        }
      },
      "required": [
        "distributionVersion",
        "infrastructure",
        "kubernetes",
        "distribution"
      ]
    },
    "Spec.Infrastructure": {
      "type": "object",
      "additionalProperties": false,
      "description": "Defines the bare metal infrastructure configuration, including nodes, network boot, storage, and networking.",
      "properties": {
        "proxy": {
          "$ref": "#/$defs/Spec.Infrastructure.Proxy"
        },
        "kernelParameters": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Spec.Infrastructure.KernelParameter"
          },
          "description": "Global kernel parameters applied to all nodes at infrastructure level. Node-specific parameters override these global values. Ref: https://kubernetes.io/docs/tasks/administer-cluster/sysctl-cluster/"
        },
        "ipxeServer": {
          "$ref": "#/$defs/Spec.Infrastructure.IpxeServer"
        },
        "nodes": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Spec.Infrastructure.Node"
          },
          "description": "List of bare metal nodes to provision.",
          "minItems": 1
        },
        "ssh": {
          "$ref": "#/$defs/Spec.Infrastructure.SSH"
        }
      },
      "required": ["nodes", "ssh"]
    },
    "Spec.Infrastructure.Proxy": {
      "type": "object",
      "additionalProperties": false,
      "description": "HTTP/HTTPS proxy configuration for the infrastructure nodes.",
      "properties": {
        "http": {
          "$ref": "#/$defs/Types.Uri",
          "description": "The HTTP proxy URL. Example: http://proxy.example.com:3128"
        },
        "https": {
          "$ref": "#/$defs/Types.Uri",
          "description": "The HTTPS proxy URL. Example: https://proxy.example.com:3128"
        },
        "noProxy": {
          "type": "string",
          "description": "Comma-separated list of hosts that should not use the HTTP(S) proxy. Example: localhost,127.0.0.1,10.0.0.0/8,.example.com"
        }
      }
    },
    "Spec.Infrastructure.KernelParameter": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_-]*([.][a-z][a-z0-9_-]*)+$",
          "description": "The kernel parameter name (sysctl format). Example: net.ipv4.ip_forward, net.bridge.bridge-nf-call-iptables",
          "minLength": 1,
          "maxLength": 256
        },
        "value": {
          "type": "string",
          "description": "The kernel parameter value. Example: \"1\"",
          "minLength": 1
        }
      },
      "required": ["name", "value"]
    },
    "Spec.Infrastructure.IpxeServer": {
      "type": "object",
      "additionalProperties": false,
      "description": "iPXE server configuration for network boot provisioning. Ref: https://www.flatcar.org/docs/latest/setup/customization/",
      "properties": {
        "url": {
          "$ref": "#/$defs/Types.Uri",
          "description": "The URL of the iPXE boot server. Example: https://ipxe.internal.example.com:8080"
        },
        "advanced": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "logLevel": {
              "type": "string",
              "description": "Log level for the iPXE server. Example: info",
              "enum": ["debug", "info", "warning", "error"]
            },
            "dataPath": {
              "type": "string",
              "description": "Path to the iPXE server data directory. Example: /var/lib/ipxe-server"
            },
            "assetsPath": {
              "type": "string",
              "description": "Path to the iPXE server assets directory. Example: /var/lib/ipxe-server/assets"
            }
          }
        }
      },
      "required": ["url"]
    },
    "Spec.Infrastructure.Node": {
      "type": "object",
      "additionalProperties": false,
      "description": "Definition of a bare metal node with storage, network, and hardware configuration.",
      "properties": {
        "hostname": {
          "type": "string",
          "description": "Fully qualified domain name for the node. Example: node01.k8s.example.com",
          "pattern": "^([a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}$",
          "minLength": 1
        },
        "arch": {
          "type": "string",
          "description": "CPU architecture for the node. Determines which Flatcar artifacts and sysext packages are downloaded. Supports mixed-architecture clusters where different nodes can run different architectures. Kubernetes automatically labels nodes with kubernetes.io/arch. Examples: x86-64 (Intel/AMD amd64), arm64 (ARM aarch64). See examples/immutable-mixed-arch-example.yaml for mixed-architecture cluster configuration.",
          "enum": ["x86-64", "arm64"],
          "default": "x86-64"
        },
        "macAddress": {
          "$ref": "#/$defs/Types.MacAddress",
          "description": "MAC address for PXE boot identification. Example: 52:54:00:10:00:01"
        },
        "storage": {
          "$ref": "#/$defs/Spec.Infrastructure.Node.Storage"
        },
        "kernelParameters": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Spec.Infrastructure.KernelParameter"
          },
          "description": "Node-specific kernel parameters that override global settings."
        },
        "iscsi": {
          "$ref": "#/$defs/Spec.Infrastructure.Node.Iscsi"
        },
        "multipath": {
          "$ref": "#/$defs/Spec.Infrastructure.Node.Multipath"
        },
        "network": {
          "$ref": "#/$defs/Spec.Infrastructure.Node.Network"
        }
      },
      "required": ["hostname", "macAddress", "storage", "network"]
    },
    "Spec.Infrastructure.Node.Storage": {
      "type": "object",
      "additionalProperties": false,
      "description": "Storage configuration for the node, including install disk and additional disks with partitions.",
      "properties": {
        "installDisk": {
          "$ref": "#/$defs/Types.DevicePath",
          "description": "The disk device where the OS will be installed. Example: /dev/sda"
        },
        "additionalDisks": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Spec.Infrastructure.Node.Storage.Disk"
          },
          "description": "Additional disks to partition and mount."
        }
      },
      "required": ["installDisk"]
    },
    "Spec.Infrastructure.Node.Storage.Disk": {
      "type": "object",
      "additionalProperties": false,
      "description": "Additional disk configuration with partitions.",
      "properties": {
        "device": {
          "$ref": "#/$defs/Types.DevicePath",
          "description": "The disk device path. Example: /dev/sdb"
        },
        "partitions": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Spec.Infrastructure.Node.Storage.Partition"
          },
          "description": "Partitions to create on this disk.",
          "minItems": 1
        }
      },
      "required": ["device", "partitions"]
    },
    "Spec.Infrastructure.Node.Storage.Partition": {
      "type": "object",
      "additionalProperties": false,
      "description": "Partition definition with filesystem and mount options.",
      "properties": {
        "label": {
          "type": "string",
          "description": "Partition label. Example: etcd-data",
          "minLength": 1
        },
        "number": {
          "type": "integer",
          "description": "Partition number. Example: 1",
          "minimum": 1,
          "maximum": 128
        },
        "sizeMiB": {
          "type": "integer",
          "description": "Partition size in MiB. Use 0 to use all available space.",
          "minimum": 0
        },
        "filesystem": {
          "$ref": "#/$defs/Spec.Infrastructure.Node.Storage.Filesystem"
        }
      },
      "required": ["label", "number", "sizeMiB", "filesystem"]
    },
    "Spec.Infrastructure.Node.Storage.Filesystem": {
      "type": "object",
      "additionalProperties": false,
      "description": "Filesystem configuration for a partition.",
      "properties": {
        "format": {
          "$ref": "#/$defs/Types.FilesystemType",
          "description": "Filesystem type. Example: ext4, xfs"
        },
        "label": {
          "type": "string",
          "description": "Filesystem label (max 12 chars for XFS compatibility). Example: ETCD",
          "minLength": 1,
          "maxLength": 12,
          "pattern": "^[A-Z0-9_-]+$"
        },
        "mountPoint": {
          "type": "string",
          "description": "Mount point path. Example: /var/lib/etcd",
          "pattern": "^/[a-zA-Z0-9/_-]*$"
        },
        "mountOptions": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "noatime",
              "nodiratime",
              "relatime",
              "strictatime",
              "nodev",
              "nosuid",
              "noexec",
              "ro",
              "rw",
              "sync",
              "async",
              "discard",
              "nodiscard",
              "defaults"
            ]
          },
          "description": "Mount options (validated safe options only). Example: [\"noatime\", \"nodiratime\"]"
        }
      },
      "required": ["format", "label", "mountPoint"]
    },
    "Spec.Infrastructure.Node.Iscsi": {
      "type": "object",
      "additionalProperties": false,
      "description": "iSCSI initiator configuration. Ref: https://www.flatcar.org/docs/latest/setup/customization/other-settings/",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable iSCSI support on this node."
        },
        "config": {
          "type": "string",
          "minLength": 1,
          "description": "iSCSI configuration content (required when enabled=true)."
        }
      },
      "required": ["enabled"],
      "if": {
        "properties": {
          "enabled": {
            "const": true
          }
        }
      },
      "then": {
        "required": ["config"]
      }
    },
    "Spec.Infrastructure.Node.Multipath": {
      "type": "object",
      "additionalProperties": false,
      "description": "DM-Multipath configuration for redundant storage paths.",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable multipath support on this node."
        },
        "config": {
          "type": "string",
          "minLength": 1,
          "description": "Multipath configuration content (required when enabled=true)."
        }
      },
      "required": ["enabled"],
      "if": {
        "properties": {
          "enabled": {
            "const": true
          }
        }
      },
      "then": {
        "required": ["config"]
      }
    },
    "Spec.Infrastructure.Node.Network": {
      "type": "object",
      "additionalProperties": false,
      "description": "Advanced network configuration with ethernets, bonds, and VLANs using networkd format.",
      "properties": {
        "ethernets": {
          "type": "object",
          "propertyNames": {
            "pattern": "^(eth|ens|eno|enp|wlan|wlp|bond|br|vlan|lo|tun|tap)[a-zA-Z0-9._-]*$",
            "maxLength": 15
          },
          "additionalProperties": {
            "$ref": "#/$defs/Spec.Infrastructure.Node.Network.Ethernet"
          },
          "description": "Ethernet interface configurations, keyed by interface name (e.g., eth0, ens3, eno49)."
        },
        "bonds": {
          "type": "object",
          "propertyNames": {
            "pattern": "^bond[a-zA-Z0-9._-]*$",
            "maxLength": 15
          },
          "additionalProperties": {
            "$ref": "#/$defs/Spec.Infrastructure.Node.Network.Bond"
          },
          "description": "Bond interface configurations, keyed by bond name (e.g., bond0, bond1)."
        }
      }
    },
    "Spec.Infrastructure.Node.Network.Ethernet": {
      "type": "object",
      "additionalProperties": false,
      "description": "Ethernet interface configuration.",
      "properties": {
        "addresses": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Types.Cidr"
          },
          "description": "List of IP addresses in CIDR notation. Example: [\"192.168.1.10/24\"]"
        },
        "gateway": {
          "$ref": "#/$defs/Types.IpAddress",
          "description": "Default gateway IP address."
        },
        "nameservers": {
          "$ref": "#/$defs/Spec.Infrastructure.Node.Network.Nameservers"
        },
        "dhcp4": {
          "type": "boolean",
          "description": "Enable DHCPv4. Default is false."
        },
        "routes": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Spec.Infrastructure.Node.Network.Route"
          },
          "description": "Static routes for this interface."
        }
      },
      "if": {
        "anyOf": [
          {
            "not": {
              "required": ["dhcp4"]
            }
          },
          {
            "properties": {
              "dhcp4": {
                "const": false
              }
            }
          }
        ]
      },
      "then": {
        "required": ["addresses"],
        "properties": {
          "addresses": {
            "minItems": 1
          }
        }
      }
    },
    "Spec.Infrastructure.Node.Network.Bond": {
      "type": "object",
      "additionalProperties": false,
      "description": "Bond interface configuration for link aggregation.",
      "properties": {
        "addresses": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Types.Cidr"
          },
          "description": "List of IP addresses in CIDR notation for the bond."
        },
        "gateway": {
          "$ref": "#/$defs/Types.IpAddress",
          "description": "Default gateway IP address for the bond."
        },
        "nameservers": {
          "$ref": "#/$defs/Spec.Infrastructure.Node.Network.Nameservers"
        },
        "dhcp4": {
          "type": "boolean",
          "description": "Enable DHCPv4 on the bond. Default is false."
        },
        "interfaces": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^(eth|ens|eno|enp|wlan|wlp|bond|br|vlan|lo|tun|tap)[a-zA-Z0-9._-]*$",
            "maxLength": 15,
            "description": "Member interface name (e.g., ens1f0, ens1f1). Must be valid Linux interface name."
          },
          "description": "List of member interfaces for the bond.",
          "minItems": 1
        },
        "parameters": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "mode": {
              "$ref": "#/$defs/Types.BondMode",
              "description": "Bonding mode. Example: active-backup, 802.3ad"
            },
            "miiMonitorInterval": {
              "type": "integer",
              "description": "MII monitoring interval in milliseconds."
            },
            "minLinks": {
              "type": "integer",
              "description": "Minimum number of links that must be active before activating aggregate."
            }
          },
          "required": ["mode"]
        },
        "routes": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Spec.Infrastructure.Node.Network.Route"
          },
          "description": "Static routes for this bond."
        }
      },
      "required": ["interfaces", "parameters"],
      "if": {
        "anyOf": [
          {
            "not": {
              "required": ["dhcp4"]
            }
          },
          {
            "properties": {
              "dhcp4": {
                "const": false
              }
            }
          }
        ]
      },
      "then": {
        "required": ["addresses"],
        "properties": {
          "addresses": {
            "minItems": 1
          }
        }
      }
    },
    "Spec.Infrastructure.Node.Network.Nameservers": {
      "type": "object",
      "additionalProperties": false,
      "description": "DNS nameserver configuration.",
      "properties": {
        "addresses": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Types.IpAddress"
          },
          "description": "List of DNS server IP addresses."
        },
        "search": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^([a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?\\.)*[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$",
            "maxLength": 253,
            "description": "DNS search domain in lowercase. Examples: example.com, internal, .internal"
          },
          "description": "List of DNS search domains (supports single-level domains).",
          "maxItems": 6
        }
      }
    },
    "Spec.Infrastructure.Node.Network.Route": {
      "type": "object",
      "additionalProperties": false,
      "description": "Static route definition.",
      "properties": {
        "to": {
          "type": "string",
          "oneOf": [
            {
              "const": "default"
            },
            {
              "$ref": "#/$defs/Types.Cidr"
            }
          ],
          "description": "Destination network. Use 'default' for default route or specify CIDR. Examples: default, 10.0.0.0/8"
        },
        "via": {
          "$ref": "#/$defs/Types.IpAddress",
          "description": "Gateway IP address for this route."
        }
      },
      "required": ["to", "via"]
    },
    "Spec.Infrastructure.SSH": {
      "type": "object",
      "additionalProperties": false,
      "description": "SSH credentials for node access.",
      "properties": {
        "username": {
          "type": "string",
          "description": "SSH username. Example: core",
          "minLength": 1
        },
        "privateKeyPath": {
          "type": "string",
          "description": "Path to the SSH private key. Example: ~/.ssh/id_ed25519_production"
        },
        "publicKeyPath": {
          "type": "string",
          "description": "Path to the SSH public key. If not specified, defaults to privateKeyPath + '.pub' (or keyPath + '.pub' if using deprecated keyPath). Example: ~/.ssh/id_ed25519_production.pub"
        }
      },
      "required": ["username"],
      "oneOf": [
        {
          "required": ["keyPath"]
        },
        {
          "required": ["privateKeyPath"]
        }
      ]
    },
    "Spec.Kubernetes": {
      "type": "object",
      "additionalProperties": false,
      "description": "Kubernetes cluster configuration including control plane, etcd, and worker nodes.",
      "properties": {
        "version": {
          "type": "string",
          "description": "Kubernetes version for sysext packages. Determines versions of containerd, kubernetes, and other components from installer defaults. Example: 1.33.4",
          "pattern": "^\\d+\\.\\d+\\.\\d+$"
        },
        "pkiPath": {
          "type": "string",
          "description": "Path to the PKI directory where to find the certificates and keys for Kubernetes Control Plane and etcd. Must have the `master` and `etcd` folders inside."
        },
        "controlPlane": {
          "$ref": "#/$defs/Spec.Kubernetes.ControlPlane"
        },
        "etcd": {
          "$ref": "#/$defs/Spec.Kubernetes.Etcd"
        },
        "loadBalancers": {
          "$ref": "#/$defs/Spec.Kubernetes.LoadBalancers"
        },
        "nodeGroups": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Spec.Kubernetes.NodeGroup"
          },
          "description": "Worker node groups with labels, taints, and annotations."
        },
        "networking": {
          "$ref": "#/$defs/Spec.Kubernetes.Networking"
        },
        "advanced": {
          "$ref": "#/$defs/Spec.Kubernetes.Advanced"
        }
      },
      "required": ["controlPlane", "networking"]
    },
    "Spec.Kubernetes.ControlPlane": {
      "type": "object",
      "additionalProperties": false,
      "description": "Control plane configuration.",
      "properties": {
        "address": {
          "type": "string",
          "description": "The address for the Kubernetes control plane with port. Example: k8s-api.example.com:6443",
          "pattern": "^[a-zA-Z0-9.-]+:[0-9]+$"
        },
        "kubeletConfiguration": {
          "$ref": "#/$defs/Spec.Kubernetes.KubeletConfiguration"
        },
        "members": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Spec.Kubernetes.Member"
          },
          "description": "Control plane member nodes.",
          "minItems": 1
        },
        "keepalived": {
          "description": "This section allows to configure a floating Virtual IP between the Control Plane nodes via Keepalived. This can be used to provide high availability for the Kubernetes API server instead of a load balancer.",
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Set to install keepalived with a floating virtual IP shared between the load balancer hosts for a deployment in High Availability."
            },
            "interface": {
              "type": "string",
              "description": "Name of the network interface where to bind the Keepalived virtual IP."
            },
            "ip": {
              "type": "string",
              "description": "The Virtual floating IP for Keepalived"
            },
            "virtualRouterId": {
              "type": "string",
              "description": "The virtual router ID of Keepalived, an arbitrary unique number from 1 to 255 used to differentiate multiple instances of vrrpd running on the same network interface and address family and multicast/unicast (and hence same socket)."
            },
            "passphrase": {
              "type": "string",
              "description": "Password for accessing vrrpd. Make it unique between Keepalived clusters.",
              "maxLength": 8
            }
          },
          "required": ["enabled"],
          "if": {
            "properties": {
              "enabled": {
                "const": true
              }
            }
          },
          "then": {
            "required": ["ip"]
          }
        },
        "taints": {
          "type": ["array", "null"],
          "items": {
            "$ref": "#/$defs/Types.KubeTaints"
          },
          "description": "Kubernetes taints for the control-plane nodes, follows Kubernetes taints format. Default is `node-role.kubernetes.io/control-plane:NoSchedule`.\n\nExample:\n\n```yaml\n- effect: NoSchedule\n  key: node.kubernetes.io/role\n  value: control-plane\n```\n\nNOTE: Setting an empty list will remove the default control-plane taint.\n\nNOTE2: Takes effect only at cluster creation time."
        },
        "labels": {
          "description": "Optional additional Kubernetes labels that will be added to the control-plane nodes. Follows Kubernetes labels format.\n\nNote: **Existing labels with the same key will be overwritten** and the label setting the `control-plane` role cannot be deleted.",
          "$ref": "#/$defs/Types.KubeLabels"
        },
        "annotations": {
          "description": "Optional additional Kubernetes annotations that will be added to the control-plane nodes. Follows Kubernetes annotations format. **Existing annotations with the same key will be overwritten**.",
          "$ref": "#/$defs/Types.KubeAnnotations"
        }
      },
      "required": ["address", "members"]
    },
    "Spec.Kubernetes.Etcd": {
      "type": "object",
      "additionalProperties": false,
      "description": "etcd cluster configuration. Ref: https://kubernetes.io/docs/tasks/administer-cluster/configure-upgrade-etcd/",
      "properties": {
        "members": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Spec.Kubernetes.Member"
          },
          "description": "etcd member nodes.",
          "minItems": 1
        }
      },
      "required": ["members"]
    },
    "Spec.Kubernetes.LoadBalancers": {
      "type": "object",
      "additionalProperties": false,
      "description": "Load balancer configuration for high-availability API server access. Uses HAProxy for load balancing and keepalived for VIP failover.",
      "properties": {
        "members": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Spec.Kubernetes.Member"
          },
          "description": "Load balancer member nodes. These nodes will run HAProxy and keepalived.",
          "minItems": 1
        },
        "virtualIP": {
          "$ref": "#/$defs/Types.IpAddress",
          "description": "Virtual IP address managed by keepalived for HA. This IP will be used as the control plane address. Example: 192.168.1.10"
        },
        "enabled": {
          "type": "boolean",
          "description": "Enable load balancer configuration. When true, HAProxy and keepalived will be configured.",
          "default": true
        }
      },
      "required": ["members", "virtualIP"]
    },
    "Spec.Kubernetes.Member": {
      "type": "object",
      "additionalProperties": false,
      "description": "A member node reference with optional IP override.",
      "properties": {
        "hostname": {
          "type": "string",
          "description": "Hostname that must match an infrastructure node. Example: ctrl01.k8s.example.com",
          "minLength": 1
        },
        "ip": {
          "$ref": "#/$defs/Types.IpAddress",
          "description": "Optional IP address. If not specified, it is inferred from the node's network configuration."
        }
      },
      "required": ["hostname"]
    },
    "Spec.Kubernetes.NodeGroup": {
      "type": "object",
      "additionalProperties": false,
      "description": "A group of worker nodes with common labels, taints, and annotations. Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/",
      "properties": {
        "name": {
          "type": "string",
          "description": "Node group name identifier. Example: infra_workers",
          "minLength": 1
        },
        "nodes": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Spec.Kubernetes.Member"
          },
          "description": "Nodes in this group.",
          "minItems": 1
        },
        "labels": {
          "$ref": "#/$defs/Types.KubeLabels",
          "description": "Kubernetes labels to apply to nodes in this group."
        },
        "taints": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Types.KubeTaints"
          },
          "description": "Kubernetes taints to apply to nodes in this group."
        },
        "annotations": {
          "$ref": "#/$defs/Types.KubeAnnotations",
          "description": "Kubernetes annotations to apply to nodes in this group."
        },
        "kubeletConfiguration": {
          "$ref": "#/$defs/Spec.Kubernetes.KubeletConfiguration"
        }
      },
      "required": ["name", "nodes"]
    },
    "Spec.Kubernetes.KubeletConfiguration": {
      "type": "object",
      "additionalProperties": false,
      "description": "Kubelet configuration parameters. Ref: https://kubernetes.io/docs/reference/config-api/kubelet-config.v1beta1/",
      "properties": {
        "maxPods": {
          "type": "integer",
          "description": "Maximum number of pods per node. Example: 200",
          "minimum": 1,
          "maximum": 1000
        },
        "podPidsLimit": {
          "type": "integer",
          "description": "Maximum number of PIDs per pod. Example: 8192",
          "minimum": 1
        }
      }
    },
    "Spec.Kubernetes.Networking": {
      "type": "object",
      "additionalProperties": false,
      "description": "Kubernetes network configuration. Ref: https://kubernetes.io/docs/concepts/cluster-administration/networking/",
      "properties": {
        "podCIDR": {
          "$ref": "#/$defs/Types.Cidr",
          "description": "Pod network CIDR. Example: 10.244.0.0/16"
        },
        "serviceCIDR": {
          "$ref": "#/$defs/Types.Cidr",
          "description": "Service network CIDR. Example: 10.96.0.0/12"
        }
      },
      "required": ["podCIDR", "serviceCIDR"]
    },
    "Spec.Kubernetes.Advanced": {
      "type": "object",
      "additionalProperties": false,
      "description": "Advanced Kubernetes cluster configuration.",
      "properties": {
        "apiServer": {
          "type": "object",
          "additionalProperties": false,
          "description": "API server configuration for certificate Subject Alternative Names.",
          "properties": {
            "certSANs": {
              "type": "array",
              "items": {
                "type": "string",
                "oneOf": [
                  {
                    "$ref": "#/$defs/Types.IpAddress"
                  },
                  {
                    "type": "string",
                    "pattern": "^([a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?\\.)+[a-z]{2,}$",
                    "maxLength": 253
                  }
                ],
                "description": "SAN entry (hostname or IP address). Examples: k8s-api.example.com, 192.168.100.100"
              },
              "description": "Additional Subject Alternative Names for the API server certificate."
            }
          }
        },
        "kubeProxy": {
          "description": "Configuration for the kube-proxy component.",
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Setting this option to `false` will skip the installation of the kube-proxy component and install the CNI plugin with the following configuration: Cilium in kube-proxy-replacement mode and Calico in eBPF mode. Default is `true`.\n\nNOTE: Changing this option after the cluster has been created is not currently supported."
            },
            "additionalProperties": false
          }
        },
        "kubeletConfiguration": {
          "$ref": "#/$defs/Spec.Kubernetes.KubeletConfiguration"
        },
        "encryption": {
          "$ref": "#/$defs/Spec.Kubernetes.Advanced.Encryption"
        },
        "containerd": {
          "$ref": "#/$defs/Spec.Kubernetes.Advanced.Containerd"
        },
        "oidc": {
          "$ref": "#/$defs/Spec.Kubernetes.Advanced.OIDC"
        },
        "users": {
          "$ref": "#/$defs/Spec.Kubernetes.Advanced.Users"
        },
        "cloud": {
          "description": "Cloud provider integration. Ref: https://kubernetes.io/docs/concepts/architecture/cloud-controller/",
          "$ref": "#/$defs/Spec.Kubernetes.Advanced.Cloud"
        },
        "registry": {
          "type": "string",
          "description": "URL of the registry where to pull images from for the Kubernetes phase. (Default is registry.sighup.io/fury/on-premises)."
        },
        "controllerManager": {
          "$ref": "#/$defs/Spec.Kubernetes.Advanced.ControllerManager"
        },
        "eventRateLimits": {
          "type": "array",
          "description": "Configures the limits of the API Server's EventRateLimit plugin. Each item represents a bucket (Server, Namespace, User, etc).",
          "items": {
            "type": "object",
            "required": ["type", "qps", "burst"],
            "properties": {
              "type": {
                "type": "string",
                "enum": ["Server", "Namespace", "User", "SourceAndObject"],
                "description": "Type of limit to apply (Server, Namespace, User, SourceAndObject)."
              },
              "qps": {
                "type": "integer",
                "description": "Maximum allowed queries per second (QPS) for this bucket type."
              },
              "burst": {
                "type": "integer",
                "description": "Maximum allowed burst for this bucket type."
              },
              "cacheSize": {
                "type": "integer",
                "description": "Maximum number of cached objects for this bucket. Only for certain types like Namespace or User."
              }
            },
            "additionalProperties": false
          }
        }
      }
    },
    "Spec.Kubernetes.Advanced.Cloud": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "provider": {
          "type": "string",
          "description": "Sets the cloud provider for the Kubelet"
        },
        "config": {
          "type": "string",
          "description": "Sets cloud config for the Kubelet"
        }
      }
    },
    "Spec.Kubernetes.Advanced.Users": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "names": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of user names to create and get a kubeconfig file. Users will not have any permissions by default, RBAC setup for the new users is needed."
        },
        "org": {
          "type": "string",
          "description": "The organization the users belong to."
        }
      }
    },
    "Spec.Kubernetes.Advanced.OIDC": {
      "type": "object",
      "additionalProperties": false,
      "description": "OIDC configuration for the Kubernetes API server.",
      "properties": {
        "issuer_url": {
          "type": "string",
          "description": "The issuer URL of the OIDC provider."
        },
        "client_id": {
          "type": "string",
          "description": "The client ID the API server will use to authenticate to the OIDC provider."
        },
        "ca_file": {
          "type": "string",
          "description": "The path to the certificate for the CA that signed the identity provider's web certificate. Defaults to the host's root CAs. This should be a path available to the API Server."
        },
        "username_claim": {
          "type": "string",
          "description": "JWT claim to use as the user name. The default value is `sub`, which is expected to be a unique identifier of the end user."
        },
        "username_prefix": {
          "type": "string",
          "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users)."
        },
        "groups_claim": {
          "type": "string",
          "description": "JWT claim to use as the user's group."
        },
        "group_prefix": {
          "type": "string",
          "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups)."
        }
      }
    },
    "Spec.Kubernetes.Advanced.Containerd": {
      "type": "object",
      "additionalProperties": false,
      "description": "Advanced configuration for containerd",
      "properties": {
        "registryConfigs": {
          "$ref": "#/$defs/Spec.Kubernetes.Advanced.Containerd.RegistryConfigs"
        },
        "selfmanagedRepositories": {
          "type": "boolean",
          "description": "Set to true if you manage the NVIDIA container toolkit's repositories externally and wish to skip their automatic configuration with furyctl. Default is false (furyctl manages repositories automatically).\nNotice that containerd itself is installed from binaries and does not use a repository. See `.spec.kubernetes.advanced.airGap` for other download options for containerd."
        },
        "storageDir": {
          "type": "string",
          "description": "The Containerd storage directory used in the config.toml file."
        },
        "stateDir": {
          "type": "string",
          "description": "The Containerd state directory used in the config.toml file."
        },
        "systemdDir": {
          "type": "string",
          "description": "The Containerd systemd service directory used in the config.toml file."
        },
        "oomScore": {
          "type": "integer",
          "description": "The Containerd OOM score adjustment used in the config.toml file."
        },
        "grpcMaxRecvMessageSize": {
          "type": "integer",
          "description": "The Containerd gRPC maximum receive message size in bytes used in the config.toml file."
        },
        "grpcMaxSendMessageSize": {
          "type": "integer",
          "description": "The Containerd gRPC maximum send message size in bytes used in the config.toml file."
        },
        "debugLevel": {
          "type": "string",
          "description": "The Containerd debug level used in the config.toml file."
        },
        "metricsAddress": {
          "type": "string",
          "description": "The Containerd metrics address used in the config.toml file."
        },
        "metricsGrpcHistogram": {
          "type": "boolean",
          "description": "Enable Containerd metrics gRPC histogram in the config.toml file."
        },
        "maxContainerLogLineSize": {
          "type": "integer",
          "description": "The maximum container log line size in bytes used in the config.toml file."
        },
        "deviceOwnershipFromSecurityContext": {
          "type": "boolean",
          "description": "Set to true to apply device ownership from the container runtime's security context instead of the host's defaults, used in the config.toml file."
        }
      }
    },
    "Spec.Kubernetes.Advanced.Containerd.RegistryConfigs": {
      "description": "Allows specifying custom configuration for a registry at containerd level. You can set authentication details and mirrors for a registry.\nThis feature can be used for example to authenticate to a private registry at containerd (container runtime) level, i.e. globally instead of using `imagePullSecrets`. It also can be used to use a mirror for a registry or to enable insecure connections to trusted registries that have self-signed certificates.",
      "type": "array",
      "additionalProperties": false,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "registry": {
            "type": "string",
            "description": "Registry address on which you would like to configure authentication or mirror(s). Example: `myregistry.tld:5000`"
          },
          "username": {
            "type": "string",
            "description": "The username containerd will use to authenticate against the registry."
          },
          "password": {
            "type": "string",
            "description": "The password containerd will use to authenticate against the registry."
          },
          "insecureSkipVerify": {
            "type": "boolean",
            "description": "Set to `true` to skip TLS verification (e.g. when using self-signed certificates)."
          },
          "mirrorEndpoint": {
            "type": "array",
            "description": "Array of URLs with the mirrors to use for the registry. Example: `[\"http://mymirror.tld:8080\"]`",
            "items": {
              "type": "string"
            }
          }
        }
      }
    },
    "Spec.Kubernetes.Advanced.Encryption": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "tlsCipherSuites": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "The TLS cipher suites to use for etcd and kubeadm static pods. Example:\n```yaml\ntlsCipherSuites:\n  - \"TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256\"\n  - \"TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\"\n  - \"TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384\"\n  - \"TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\"\n  - \"TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256\"\n  - \"TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256\"\n  - \"TLS_AES_128_GCM_SHA256\"\n  - \"TLS_AES_256_GCM_SHA384\"\n  - \"TLS_CHACHA20_POLY1305_SHA256\"\n```\n."
        },
        "tlsCipherSuitesKubelet": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "The TLS cipher suites to use for the kubelet. Example:\n```yaml\ntlsCipherSuitesKubelet:\n  - \"TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256\"\n  - \"TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\"\n  - \"TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384\"\n - \"TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305\"\n  - \"TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305\"\n  - \"TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\"\n```\n. NOTE: to customize the TLS cipher suites of the kubelet, set only this field - do not configure them under the `KubeletConfiguration`."
        },
        "configuration": {
          "type": "string",
          "description": "etcd's encryption at rest configuration. Must be a string with the EncryptionConfiguration object in YAML. Example:\n\n```yaml\n\napiVersion: apiserver.config.k8s.io/v1\nkind: EncryptionConfiguration\nresources:\n  - resources:\n    - secrets\n    providers:\n    - aescbc:\n        keys:\n        - name: mykey\n          secret: base64_encoded_secret\n```\n"
        }
      }
    },
    "Spec.Kubernetes.Advanced.ControllerManager": {
      "type": "object",
      "additionalProperties": false,
      "description": "Advanced configuration for the controller-manager.",
      "properties": {
        "gcThreshold": {
          "type": "integer",
          "description": "Maximum number of terminated Pods retained by the controller-manager before automatic deletion."
        }
      }
    },
    "Spec.Distribution": {
      "type": "object",
      "additionalProperties": false,
      "description": "Fury Kubernetes Distribution modules configuration. Ref: https://docs.kubernetesfury.com/",
      "properties": {
        "common": {
          "$ref": "#/$defs/Spec.Distribution.Common"
        },
        "modules": {
          "$ref": "#/$defs/Spec.Distribution.Modules"
        },
        "customPatches": {
          "$ref": "./spec-distribution-custompatches.json"
        }
      },
      "required": ["modules"]
    },
    "Spec.Distribution.Common": {
      "type": "object",
      "additionalProperties": false,
      "description": "Common configuration for all distribution modules.",
      "properties": {
        "nodeSelector": {
          "$ref": "#/$defs/Types.KubeNodeSelector",
          "description": "Node selector for all KFD module pods."
        },
        "tolerations": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Types.KubeToleration"
          },
          "description": "Tolerations for all KFD module pods."
        },
        "registry": {
          "type": "string",
          "pattern": "^([a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?\\.)+[a-z]{2,}(:[0-9]{1,5})?(/[a-z0-9._-]+)*$",
          "description": "Container registry URL for SD images. Example: registry.sighup.io/fury"
        }
      }
    },
    "Spec.Distribution.Modules": {
      "type": "object",
      "additionalProperties": false,
      "description": "KFD modules configuration.",
      "properties": {
        "networking": {
          "type": "object",
          "additionalProperties": false,
          "description": "CNI plugin configuration. Ref: https://docs.tigera.io/calico/latest/about/",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["calico", "cilium", "none"],
              "description": "CNI plugin type."
            }
          },
          "required": ["type"]
        },
        "ingress": {
          "type": "object",
          "additionalProperties": false,
          "description": "Ingress controller configuration. Ref: https://kubernetes.github.io/ingress-nginx/",
          "properties": {
            "baseDomain": {
              "type": "string",
              "pattern": "^([a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?\\.)+[a-z]{2,}$",
              "maxLength": 253,
              "description": "Base domain for ingresses (lowercase). Example: example.com"
            },
            "nginx": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "type": {
                  "type": "string",
                  "enum": ["single", "dual", "none"],
                  "description": "Nginx ingress controller type."
                },
                "tls": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "provider": {
                      "type": "string",
                      "enum": ["certManager", "secret", "none"],
                      "description": "TLS certificate provider."
                    }
                  },
                  "required": ["provider"]
                }
              },
              "required": ["type"]
            },
            "certManager": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "clusterIssuer": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "name": {
                      "type": "string",
                      "description": "Cluster issuer name."
                    },
                    "email": {
                      "type": "string",
                      "format": "email",
                      "description": "Email for Let's Encrypt."
                    },
                    "type": {
                      "type": "string",
                      "enum": ["http01"],
                      "description": "Challenge type."
                    }
                  },
                  "required": ["name", "email", "type"]
                }
              },
              "required": ["clusterIssuer"]
            }
          },
          "required": ["baseDomain", "nginx"]
        },
        "logging": {
          "type": "object",
          "additionalProperties": false,
          "description": "Logging stack configuration. Ref: https://grafana.com/docs/loki/latest/",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["loki", "opensearch", "none"],
              "description": "Logging backend type."
            },
            "loki": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "retentionPeriod": {
                  "$ref": "#/$defs/Types.Duration",
                  "description": "Log retention period. Example: 720h"
                },
                "storage": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "size": {
                      "$ref": "#/$defs/Types.KubernetesQuantity",
                      "description": "Storage size. Example: 50Gi"
                    }
                  }
                }
              }
            },
            "minio": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "storageSize": {
                  "$ref": "#/$defs/Types.KubernetesQuantity",
                  "description": "MinIO storage size. Example: 20Gi"
                }
              }
            }
          },
          "required": ["type"]
        },
        "monitoring": {
          "type": "object",
          "additionalProperties": false,
          "description": "Monitoring stack configuration. Ref: https://prometheus.io/docs/introduction/overview/",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["prometheus", "prometheusAgent", "mimir", "none"],
              "description": "Monitoring backend type."
            },
            "prometheus": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "retentionTime": {
                  "$ref": "#/$defs/Types.Duration",
                  "description": "Metrics retention time. Example: 15d"
                },
                "retentionSize": {
                  "type": "string",
                  "pattern": "(^0|([0-9]*[.])?[0-9]+((K|M|G|T|E|P)i?)?B)$",
                  "description": "Metrics retention size. Example: 50GB"
                },
                "storageSize": {
                  "$ref": "#/$defs/Types.KubernetesQuantity",
                  "description": "Storage size for Prometheus. Example: 60Gi"
                }
              }
            },
            "prometheusAdapter": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "installEnhancedHPAMetrics": {
                  "type": "boolean",
                  "description": "Install enhanced HPA metrics."
                },
                "resources": {
                  "$ref": "#/$defs/Types.KubeResources"
                }
              }
            },
            "alertmanager": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "installDefaultRules": {
                  "type": "boolean",
                  "description": "Install default alerting rules."
                },
                "deadMansSwitch": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "enabled": {
                      "type": "boolean",
                      "description": "Enable dead man's switch."
                    }
                  }
                }
              }
            }
          },
          "required": ["type"]
        },
        "tracing": {
          "type": "object",
          "additionalProperties": false,
          "description": "Tracing configuration. Ref: https://grafana.com/docs/tempo/latest/",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["tempo", "none"],
              "description": "Tracing backend type."
            },
            "tempo": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "retentionTime": {
                  "$ref": "#/$defs/Types.Duration",
                  "description": "Trace retention time. Example: 720h"
                }
              }
            }
          },
          "required": ["type"]
        },
        "policy": {
          "type": "object",
          "additionalProperties": false,
          "description": "Policy engine configuration. Ref: https://kyverno.io/docs/",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["kyverno", "gatekeeper", "none"],
              "description": "Policy engine type."
            },
            "kyverno": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "validationFailureAction": {
                  "type": "string",
                  "enum": ["Audit", "Enforce"],
                  "description": "Default action for validation failures."
                },
                "installDefaultPolicies": {
                  "type": "boolean",
                  "description": "Install default Kyverno policies."
                }
              }
            }
          },
          "required": ["type"]
        },
        "dr": {
          "type": "object",
          "additionalProperties": false,
          "description": "Disaster recovery configuration. Ref: https://velero.io/docs/",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["on-premises", "none"],
              "description": "DR backend type."
            },
            "velero": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "backend": {
                  "type": "string",
                  "enum": ["s3", "minio"],
                  "description": "Backup storage backend."
                },
                "s3": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "bucketName": {
                      "type": "string",
                      "pattern": "^[a-z0-9][a-z0-9.-]{1,61}[a-z0-9]$",
                      "minLength": 3,
                      "maxLength": 63,
                      "description": "S3 bucket name (3-63 chars, lowercase, no underscores). Example: production-cluster-backups"
                    },
                    "region": {
                      "type": "string",
                      "description": "S3 region."
                    },
                    "endpoint": {
                      "$ref": "#/$defs/Types.Uri",
                      "description": "S3 endpoint URL."
                    }
                  }
                },
                "schedules": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                      "name": {
                        "type": "string",
                        "description": "Schedule name."
                      },
                      "schedule": {
                        "type": "string",
                        "pattern": "^(@(annually|yearly|monthly|weekly|daily|hourly|reboot))|(@every (\\d+(ns|us|s|ms|s|m|h))+)|(((\\d+,)+\\d+|(\\d+([/-])\\d+)|\\d+|\\*) +){4}((\\d+,)+\\d+|(\\d+([/-])\\d+)|\\d+|\\*)$",
                        "description": "Cron expression (standard 5-field format). Examples: 0 3 * * *, */5 * * * *, @daily"
                      },
                      "ttl": {
                        "$ref": "#/$defs/Types.Duration",
                        "description": "Backup retention duration. Example: 720h"
                      }
                    },
                    "required": ["name", "schedule", "ttl"]
                  }
                }
              }
            }
          },
          "required": ["type"]
        },
        "auth": {
          "type": "object",
          "additionalProperties": false,
          "description": "Authentication provider configuration.",
          "properties": {
            "provider": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "type": {
                  "type": "string",
                  "enum": ["none", "basicAuth", "sso"],
                  "description": "Authentication provider type."
                }
              },
              "required": ["type"]
            }
          },
          "required": ["provider"]
        }
      },
      "required": [
        "networking",
        "ingress",
        "logging",
        "monitoring",
        "policy",
        "dr",
        "auth"
      ]
    },
    "Types.MacAddress": {
      "type": "string",
      "pattern": "^([0-9A-Fa-f]{2}:){5}([0-9A-Fa-f]{2})$",
      "description": "MAC address in format XX:XX:XX:XX:XX:XX"
    },
    "Types.DevicePath": {
      "type": "string",
      "pattern": "^/dev/[a-zA-Z0-9/]+$",
      "description": "Unix device path. Example: /dev/sda, /dev/nvme0n1"
    },
    "Types.FilesystemType": {
      "type": "string",
      "enum": ["ext4", "xfs", "btrfs", "ext3", "vfat"],
      "description": "Filesystem type"
    },
    "Types.BondMode": {
      "type": "string",
      "enum": [
        "balance-rr",
        "active-backup",
        "balance-xor",
        "broadcast",
        "802.3ad",
        "balance-tlb",
        "balance-alb"
      ],
      "description": "Linux bonding mode"
    },
    "Types.SemVer": {
      "type": "string",
      "pattern": "^v?(?P<major>0|[1-9]\\d*)\\.(?P<minor>0|[1-9]\\d*)\\.(?P<patch>0|[1-9]\\d*)(?:-(?P<prerelease>(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+(?P<buildmetadata>[0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$"
    },
    "Types.IpAddress": {
      "type": "string",
      "pattern": "^((25[0-5]|(2[0-4]|1\\d|[1-9]|)\\d)\\.){3}(25[0-5]|(2[0-4]|1\\d|[1-9]|)\\d)$"
    },
    "Types.Cidr": {
      "type": "string",
      "pattern": "^((25[0-5]|(2[0-4]|1\\d|[1-9]|)\\d)\\.){3}(25[0-5]|(2[0-4]|1\\d|[1-9]|)\\d)\\/(3[0-2]|[1-2][0-9]|[0-9])$"
    },
    "Types.FileRef": {
      "type": "string",
      "pattern": "^\\{file\\:\\/\\/.+\\}$"
    },
    "Types.EnvRef": {
      "type": "string",
      "pattern": "\\{^env\\:\\/\\/.*\\}$"
    },
    "Types.TcpPort": {
      "type": "integer",
      "minimum": 0,
      "maximum": 65535
    },
    "Types.SshPubKey": {
      "type": "string",
      "pattern": "^ssh\\-(dsa|ecdsa|ecdsa-sk|ed25519|ed25519-sk|rsa)\\s+"
    },
    "Types.Uri": {
      "type": "string",
      "pattern": "^(http|https)\\:\\/\\/.+$"
    },
    "Types.KubeLabels": {
      "type": ["object", "null"],
      "propertyNames": {
        "pattern": "^([a-zA-Z0-9][a-zA-Z0-9-.]*[a-zA-Z0-9]/)?([a-zA-Z0-9][-a-zA-Z0-9_.]*)?[a-zA-Z0-9]$",
        "maxLength": 253
      },
      "additionalProperties": {
        "type": "string",
        "pattern": "^(([a-zA-Z0-9][-a-zA-Z0-9_.]*)?[a-zA-Z0-9])?$",
        "maxLength": 63
      }
    },
    "Types.KubeAnnotations": {
      "type": ["object", "null"],
      "propertyNames": {
        "pattern": "^([a-zA-Z0-9][a-zA-Z0-9-.]*[a-zA-Z0-9]/)?([a-zA-Z0-9][-a-zA-Z0-9_.]*)?[a-zA-Z0-9]$",
        "maxLength": 253
      },
      "additionalProperties": {
        "type": "string"
      }
    },
    "Types.KubeTaints": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "effect": {
          "type": "string",
          "enum": ["NoSchedule", "PreferNoSchedule", "NoExecute"]
        },
        "key": {
          "type": "string"
        },
        "value": {
          "type": "string"
        }
      },
      "required": ["effect", "key", "value"]
    },
    "Types.KubeNodeSelector": {
      "type": ["object", "null"],
      "additionalProperties": {
        "type": "string"
      }
    },
    "Types.KubeToleration": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "effect": {
          "type": "string",
          "enum": ["NoSchedule", "PreferNoSchedule", "NoExecute"]
        },
        "operator": {
          "type": "string",
          "enum": ["Exists", "Equal"]
        },
        "key": {
          "type": "string",
          "description": "The key of the toleration"
        },
        "value": {
          "type": "string",
          "description": "The value of the toleration"
        }
      },
      "required": ["effect", "key"],
      "anyOf": [
        {
          "required": ["operator"]
        },
        {
          "required": ["value"]
        }
      ]
    },
    "Types.KubeResources": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "requests": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "cpu": {
              "type": "string",
              "pattern": "^[0-9]+(\\.[0-9]+)?(m|)$",
              "description": "The CPU request for the Pod, in cores or millicores. Examples: 500m, 1, 0.5"
            },
            "memory": {
              "$ref": "#/$defs/Types.KubernetesQuantity",
              "description": "The memory request for the Pod. Example: 500Mi, 1Gi"
            }
          }
        },
        "limits": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "cpu": {
              "type": "string",
              "pattern": "^[0-9]+(\\.[0-9]+)?(m|)$",
              "description": "The CPU limit for the Pod, in cores or millicores. Examples: 1000m, 2, 1.5"
            },
            "memory": {
              "$ref": "#/$defs/Types.KubernetesQuantity",
              "description": "The memory limit for the Pod. Example: 1Gi, 2Gi"
            }
          }
        }
      }
    },
    "Types.KubernetesQuantity": {
      "type": "string",
      "pattern": "^[0-9]+(\\.[0-9]+)?(Ei?|Pi?|Ti?|Gi?|Mi?|Ki?|[EPTGMk])$",
      "description": "Kubernetes resource quantity format. Examples: 50Gi, 100Mi, 1Ti"
    },
    "Types.Duration": {
      "type": "string",
      "pattern": "^[0-9]+(\\.[0-9]+)?(ns|us|s|ms|s|m|h|d)$",
      "description": "Duration format with unit suffix. Examples: 720h, 15d, 30m, 5s"
    }
  }
}
